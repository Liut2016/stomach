{"version":3,"file":"ng2-completer.umd.js","sources":["globals.js","services/completer-data-factory.js","directives/ctr-completer.js","services/completer-base-data.js","services/local-data.js","services/remote-data.js","services/completer-service.js","components/completer-cmp.js","components/completer-list-item-cmp.js","directives/ctr-dropdown.js","directives/ctr-input.js","directives/ctr-list.js","directives/ctr-row.js","ng2-completer.module.js"],"sourcesContent":["export var MAX_CHARS = 524288; // the default max length per the html maxlength attribute\nexport var MIN_SEARCH_LENGTH = 3;\nexport var PAUSE = 10;\nexport var TEXT_SEARCHING = \"Searching...\";\nexport var TEXT_NO_RESULTS = \"No results found\";\nexport var CLEAR_TIMEOUT = 50;\nexport function isNil(value) {\n    return typeof value === \"undefined\" || value === null;\n}\n//# sourceMappingURL=globals.js.map","import { Http } from \"@angular/http\";\nimport { LocalData } from \"./local-data\";\nimport { RemoteData } from \"./remote-data\";\nexport function localDataFactory() {\n    return function () {\n        return new LocalData();\n    };\n}\nexport function remoteDataFactory(http) {\n    return function () {\n        return new RemoteData(http);\n    };\n}\nexport var LocalDataFactoryProvider = { provide: LocalData, useFactory: localDataFactory };\nexport var RemoteDataFactoryProvider = { provide: RemoteData, useFactory: remoteDataFactory, deps: [Http] };\n//# sourceMappingURL=completer-data-factory.js.map","import { Directive, EventEmitter, Output } from \"@angular/core\";\nvar CtrCompleter = (function () {\n    function CtrCompleter() {\n        this.selected = new EventEmitter();\n        this.highlighted = new EventEmitter();\n        this.opened = new EventEmitter();\n        this.dataSourceChange = new EventEmitter();\n        this._hasHighlighted = false;\n        this._hasSelected = false;\n        this._cancelBlur = false;\n        this._isOpen = false;\n    }\n    CtrCompleter.prototype.registerList = function (list) {\n        this.list = list;\n    };\n    CtrCompleter.prototype.registerDropdown = function (dropdown) {\n        this.dropdown = dropdown;\n    };\n    CtrCompleter.prototype.onHighlighted = function (item) {\n        this.highlighted.emit(item);\n        this._hasHighlighted = !!item;\n    };\n    CtrCompleter.prototype.onSelected = function (item, clearList) {\n        if (clearList === void 0) { clearList = true; }\n        this.selected.emit(item);\n        if (item) {\n            this._hasSelected = true;\n        }\n        if (clearList) {\n            this.clear();\n        }\n    };\n    CtrCompleter.prototype.onDataSourceChange = function () {\n        if (this.hasSelected) {\n            this.selected.emit(null);\n            this._hasSelected = false;\n        }\n        this.dataSourceChange.emit();\n    };\n    CtrCompleter.prototype.search = function (term) {\n        if (this._hasSelected) {\n            this.selected.emit(null);\n            this._hasSelected = false;\n        }\n        if (this.list) {\n            this.list.search(term);\n        }\n    };\n    CtrCompleter.prototype.clear = function () {\n        this._hasHighlighted = false;\n        this.isOpen = false;\n        if (this.dropdown) {\n            this.dropdown.clear();\n        }\n        if (this.list) {\n            this.list.clear();\n        }\n    };\n    CtrCompleter.prototype.selectCurrent = function () {\n        if (this.dropdown) {\n            this.dropdown.selectCurrent();\n        }\n    };\n    CtrCompleter.prototype.nextRow = function () {\n        if (this.dropdown) {\n            this.dropdown.nextRow();\n        }\n    };\n    CtrCompleter.prototype.prevRow = function () {\n        if (this.dropdown) {\n            this.dropdown.prevRow();\n        }\n    };\n    CtrCompleter.prototype.hasHighlighted = function () {\n        return this._hasHighlighted;\n    };\n    CtrCompleter.prototype.cancelBlur = function (cancel) {\n        this._cancelBlur = cancel;\n    };\n    CtrCompleter.prototype.isCancelBlur = function () {\n        return this._cancelBlur;\n    };\n    CtrCompleter.prototype.open = function () {\n        if (!this._isOpen) {\n            this.isOpen = true;\n            this.list.open();\n        }\n    };\n    Object.defineProperty(CtrCompleter.prototype, \"isOpen\", {\n        get: function () {\n            return this._isOpen;\n        },\n        set: function (open) {\n            this._isOpen = open;\n            this.opened.emit(this._isOpen);\n            if (this.list) {\n                this.list.isOpen(open);\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CtrCompleter.prototype, \"autoHighlightIndex\", {\n        get: function () {\n            return this._autoHighlightIndex;\n        },\n        set: function (index) {\n            this._autoHighlightIndex = index;\n            if (this.dropdown) {\n                this.dropdown.highlightRow(this._autoHighlightIndex);\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CtrCompleter.prototype, \"hasSelected\", {\n        get: function () {\n            return this._hasSelected;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CtrCompleter.decorators = [\n        { type: Directive, args: [{\n                    selector: \"[ctrCompleter]\",\n                },] },\n    ];\n    /** @nocollapse */\n    CtrCompleter.ctorParameters = function () { return []; };\n    CtrCompleter.propDecorators = {\n        'selected': [{ type: Output },],\n        'highlighted': [{ type: Output },],\n        'opened': [{ type: Output },],\n        'dataSourceChange': [{ type: Output },],\n    };\n    return CtrCompleter;\n}());\nexport { CtrCompleter };\n//# sourceMappingURL=ctr-completer.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Subject } from \"rxjs/Subject\";\nimport { isNil } from \"../globals\";\nvar CompleterBaseData = (function (_super) {\n    __extends(CompleterBaseData, _super);\n    function CompleterBaseData() {\n        return _super.call(this) || this;\n    }\n    CompleterBaseData.prototype.cancel = function () { };\n    CompleterBaseData.prototype.searchFields = function (searchFields) {\n        this._searchFields = searchFields;\n        return this;\n    };\n    CompleterBaseData.prototype.titleField = function (titleField) {\n        this._titleField = titleField;\n        return this;\n    };\n    CompleterBaseData.prototype.descriptionField = function (descriptionField) {\n        this._descriptionField = descriptionField;\n        return this;\n    };\n    CompleterBaseData.prototype.imageField = function (imageField) {\n        this._imageField = imageField;\n        return this;\n    };\n    CompleterBaseData.prototype.convertToItem = function (data) {\n        var image = null;\n        var formattedText;\n        var formattedDesc = null;\n        if (this._titleField) {\n            formattedText = this.extractTitle(data);\n        }\n        else {\n            formattedText = data;\n        }\n        if (typeof formattedText !== \"string\") {\n            formattedText = JSON.stringify(formattedText);\n        }\n        if (this._descriptionField) {\n            formattedDesc = this.extractValue(data, this._descriptionField);\n        }\n        if (this._imageField) {\n            image = this.extractValue(data, this._imageField);\n        }\n        if (isNil(formattedText)) {\n            return null;\n        }\n        return {\n            title: formattedText,\n            description: formattedDesc,\n            image: image,\n            originalObject: data\n        };\n    };\n    CompleterBaseData.prototype.extractMatches = function (data, term) {\n        var _this = this;\n        var matches = [];\n        var searchFields = this._searchFields ? this._searchFields.split(\",\") : null;\n        if (this._searchFields !== null && this._searchFields !== undefined && term != \"\") {\n            matches = data.filter(function (item) {\n                var values = searchFields ? searchFields.map(function (searchField) { return _this.extractValue(item, searchField); }).filter(function (value) { return !!value; }) : [item];\n                return values.some(function (value) { return value.toString().toLowerCase().indexOf(term.toString().toLowerCase()) >= 0; });\n            });\n        }\n        else {\n            matches = data;\n        }\n        return matches;\n    };\n    CompleterBaseData.prototype.extractTitle = function (item) {\n        var _this = this;\n        // split title fields and run extractValue for each and join with ' '\n        return this._titleField.split(\",\")\n            .map(function (field) {\n            return _this.extractValue(item, field);\n        })\n            .reduce(function (acc, titlePart) { return acc ? acc + \" \" + titlePart : titlePart; });\n    };\n    CompleterBaseData.prototype.extractValue = function (obj, key) {\n        var keys;\n        var result;\n        if (key) {\n            keys = key.split(\".\");\n            result = obj;\n            for (var i = 0; i < keys.length; i++) {\n                if (result) {\n                    result = result[keys[i]];\n                }\n            }\n        }\n        else {\n            result = obj;\n        }\n        return result;\n    };\n    CompleterBaseData.prototype.processResults = function (matches) {\n        var i;\n        var results = [];\n        if (matches && matches.length > 0) {\n            for (i = 0; i < matches.length; i++) {\n                var item = this.convertToItem(matches[i]);\n                if (item) {\n                    results.push(item);\n                }\n            }\n        }\n        return results;\n    };\n    return CompleterBaseData;\n}(Subject));\nexport { CompleterBaseData };\n//# sourceMappingURL=completer-base-data.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Injectable, EventEmitter } from \"@angular/core\";\nimport { Observable } from \"rxjs/Observable\";\nimport \"rxjs/add/operator/catch\";\nimport { CompleterBaseData } from \"./completer-base-data\";\nvar LocalData = (function (_super) {\n    __extends(LocalData, _super);\n    function LocalData() {\n        var _this = _super.call(this) || this;\n        _this.dataSourceChange = new EventEmitter();\n        return _this;\n    }\n    LocalData.prototype.data = function (data) {\n        var _this = this;\n        if (data instanceof Observable) {\n            var data$ = data;\n            data$\n                .catch(function () { return []; })\n                .subscribe(function (res) {\n                _this._data = res;\n                if (_this.savedTerm) {\n                    _this.search(_this.savedTerm);\n                }\n                _this.dataSourceChange.emit();\n            });\n        }\n        else {\n            this._data = data;\n        }\n        this.dataSourceChange.emit();\n        return this;\n    };\n    LocalData.prototype.search = function (term) {\n        if (!this._data) {\n            this.savedTerm = term;\n        }\n        else {\n            this.savedTerm = null;\n            var matches = this.extractMatches(this._data, term);\n            this.next(this.processResults(matches));\n        }\n    };\n    LocalData.prototype.convertToItem = function (data) {\n        return _super.prototype.convertToItem.call(this, data);\n    };\n    LocalData.decorators = [\n        { type: Injectable },\n    ];\n    /** @nocollapse */\n    LocalData.ctorParameters = function () { return []; };\n    return LocalData;\n}(CompleterBaseData));\nexport { LocalData };\n//# sourceMappingURL=local-data.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { EventEmitter } from \"@angular/core\";\nimport { Headers, RequestOptions } from \"@angular/http\";\nimport \"rxjs/add/operator/map\";\nimport \"rxjs/add/operator/catch\";\nimport { CompleterBaseData } from \"./completer-base-data\";\nvar RemoteData = (function (_super) {\n    __extends(RemoteData, _super);\n    function RemoteData(http) {\n        var _this = _super.call(this) || this;\n        _this.http = http;\n        _this.dataSourceChange = new EventEmitter();\n        _this._urlFormater = null;\n        _this._dataField = null;\n        return _this;\n    }\n    RemoteData.prototype.remoteUrl = function (remoteUrl) {\n        this._remoteUrl = remoteUrl;\n        this.dataSourceChange.emit();\n        return this;\n    };\n    RemoteData.prototype.urlFormater = function (urlFormater) {\n        this._urlFormater = urlFormater;\n    };\n    RemoteData.prototype.dataField = function (dataField) {\n        this._dataField = dataField;\n    };\n    /**\n     * @deprecated Please use the requestOptions to pass headers with the search request\n     */\n    RemoteData.prototype.headers = function (headers) {\n        this._headers = headers;\n    };\n    RemoteData.prototype.requestOptions = function (requestOptions) {\n        this._requestOptions = requestOptions;\n    };\n    RemoteData.prototype.search = function (term) {\n        var _this = this;\n        this.cancel();\n        // let params = {};\n        var url = \"\";\n        if (this._urlFormater) {\n            url = this._urlFormater(term);\n        }\n        else {\n            url = this._remoteUrl + encodeURIComponent(term);\n        }\n        /*\n         * If requestOptions are provided, they will override anything set in headers.\n         *\n         * If no requestOptions are provided, a new RequestOptions object will be instantiated,\n         * and either the provided headers or a new Headers() object will be sent.\n         */\n        if (!this._requestOptions) {\n            this._requestOptions = new RequestOptions();\n            this._requestOptions.headers = this._headers || new Headers();\n        }\n        this.remoteSearch = this.http.get(url, this._requestOptions.merge())\n            .map(function (res) { return res.json(); })\n            .map(function (data) {\n            var matches = _this.extractValue(data, _this._dataField);\n            return _this.extractMatches(matches, term);\n        })\n            .catch(function () { return []; })\n            .subscribe(function (matches) {\n            var results = _this.processResults(matches);\n            _this.next(results);\n        });\n    };\n    RemoteData.prototype.cancel = function () {\n        if (this.remoteSearch) {\n            this.remoteSearch.unsubscribe();\n        }\n    };\n    RemoteData.prototype.convertToItem = function (data) {\n        return _super.prototype.convertToItem.call(this, data);\n    };\n    return RemoteData;\n}(CompleterBaseData));\nexport { RemoteData };\n//# sourceMappingURL=remote-data.js.map","import { Injectable, Inject } from \"@angular/core\";\nimport { LocalData } from \"./local-data\";\nimport { RemoteData } from \"./remote-data\";\nvar CompleterService = (function () {\n    function CompleterService(localDataFactory, // Using any instead of () => LocalData because on AoT errors\n        remoteDataFactory // Using any instead of () => LocalData because on AoT errors\n    ) {\n        this.localDataFactory = localDataFactory;\n        this.remoteDataFactory = remoteDataFactory; // Using any instead of () => LocalData because on AoT errors\n    }\n    CompleterService.prototype.local = function (data, searchFields, titleField) {\n        if (searchFields === void 0) { searchFields = \"\"; }\n        if (titleField === void 0) { titleField = \"\"; }\n        var localData = this.localDataFactory();\n        return localData\n            .data(data)\n            .searchFields(searchFields)\n            .titleField(titleField);\n    };\n    CompleterService.prototype.remote = function (url, searchFields, titleField) {\n        if (searchFields === void 0) { searchFields = \"\"; }\n        if (titleField === void 0) { titleField = \"\"; }\n        var remoteData = this.remoteDataFactory();\n        return remoteData\n            .remoteUrl(url)\n            .searchFields(searchFields)\n            .titleField(titleField);\n    };\n    CompleterService.decorators = [\n        { type: Injectable },\n    ];\n    /** @nocollapse */\n    CompleterService.ctorParameters = function () { return [\n        { type: undefined, decorators: [{ type: Inject, args: [LocalData,] },] },\n        { type: undefined, decorators: [{ type: Inject, args: [RemoteData,] },] },\n    ]; };\n    return CompleterService;\n}());\nexport { CompleterService };\n//# sourceMappingURL=completer-service.js.map","\"use strict\";\nimport { ChangeDetectorRef, Component, Input, Output, EventEmitter, ViewChild, forwardRef } from \"@angular/core\";\nimport { FormControl, NG_VALUE_ACCESSOR } from \"@angular/forms\";\nimport { CtrCompleter } from \"../directives/ctr-completer\";\nimport { CompleterService } from \"../services/completer-service\";\nimport { MAX_CHARS, MIN_SEARCH_LENGTH, PAUSE, TEXT_SEARCHING, TEXT_NO_RESULTS, isNil } from \"../globals\";\nimport \"rxjs/add/operator/catch\";\nvar noop = function () { };\nvar COMPLETER_CONTROL_VALUE_ACCESSOR = {\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(function () { return CompleterCmp; }),\n    multi: true\n};\nvar CompleterCmp = (function () {\n    function CompleterCmp(completerService, cdr) {\n        this.completerService = completerService;\n        this.cdr = cdr;\n        this.inputName = \"\";\n        this.inputId = \"\";\n        this.pause = PAUSE;\n        this.minSearchLength = MIN_SEARCH_LENGTH;\n        this.maxChars = MAX_CHARS;\n        this.overrideSuggested = false;\n        this.clearSelected = false;\n        this.clearUnselected = false;\n        this.fillHighlighted = true;\n        this.placeholder = \"\";\n        this.autoMatch = false;\n        this.disableInput = false;\n        this.autofocus = false;\n        this.openOnFocus = false;\n        this.openOnClick = false;\n        this.selectOnClick = false;\n        this.selectOnFocus = false;\n        this.autoHighlight = false;\n        this.selected = new EventEmitter();\n        this.highlighted = new EventEmitter();\n        this.blurEvent = new EventEmitter();\n        this.click = new EventEmitter();\n        this.focusEvent = new EventEmitter();\n        this.opened = new EventEmitter();\n        this.keyup = new EventEmitter();\n        this.keydown = new EventEmitter();\n        this.control = new FormControl(\"\");\n        this.displaySearching = true;\n        this.displayNoResults = true;\n        this._textNoResults = TEXT_NO_RESULTS;\n        this._textSearching = TEXT_SEARCHING;\n        this._onTouchedCallback = noop;\n        this._onChangeCallback = noop;\n        this._focus = false;\n        this._open = false;\n        this._searchStr = \"\";\n    }\n    Object.defineProperty(CompleterCmp.prototype, \"value\", {\n        get: function () { return this.searchStr; },\n        set: function (v) {\n            if (v !== this.searchStr) {\n                this.searchStr = v;\n            }\n            // Propagate the change in any case\n            this._onChangeCallback(v);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ;\n    Object.defineProperty(CompleterCmp.prototype, \"searchStr\", {\n        get: function () {\n            return this._searchStr;\n        },\n        set: function (value) {\n            if (typeof value === \"string\" || isNil(value)) {\n                this._searchStr = value;\n            }\n            else {\n                this._searchStr = JSON.stringify(value);\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CompleterCmp.prototype.ngAfterViewInit = function () {\n        if (this.autofocus) {\n            this._focus = true;\n        }\n    };\n    CompleterCmp.prototype.ngAfterViewChecked = function () {\n        var _this = this;\n        if (this._focus) {\n            setTimeout(function () {\n                _this.ctrInput.nativeElement.focus();\n                _this._focus = false;\n            }, 0);\n        }\n    };\n    CompleterCmp.prototype.onTouched = function () {\n        this._onTouchedCallback();\n    };\n    CompleterCmp.prototype.writeValue = function (value) {\n        this.searchStr = value;\n    };\n    CompleterCmp.prototype.registerOnChange = function (fn) {\n        this._onChangeCallback = fn;\n    };\n    CompleterCmp.prototype.registerOnTouched = function (fn) {\n        this._onTouchedCallback = fn;\n    };\n    CompleterCmp.prototype.setDisabledState = function (isDisabled) {\n        this.disableInput = isDisabled;\n    };\n    Object.defineProperty(CompleterCmp.prototype, \"datasource\", {\n        set: function (source) {\n            if (source) {\n                if (source instanceof Array) {\n                    this.dataService = this.completerService.local(source);\n                }\n                else if (typeof (source) === \"string\") {\n                    this.dataService = this.completerService.remote(source);\n                }\n                else {\n                    this.dataService = source;\n                }\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CompleterCmp.prototype, \"textNoResults\", {\n        set: function (text) {\n            if (this._textNoResults != text) {\n                this._textNoResults = text;\n                this.displayNoResults = !!this._textNoResults && this._textNoResults !== \"false\";\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CompleterCmp.prototype, \"textSearching\", {\n        set: function (text) {\n            if (this._textSearching != text) {\n                this._textSearching = text;\n                this.displaySearching = !!this._textSearching && this._textSearching !== \"false\";\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CompleterCmp.prototype.ngOnInit = function () {\n        var _this = this;\n        this.completer.selected.subscribe(function (item) {\n            _this.selected.emit(item);\n        });\n        this.completer.highlighted.subscribe(function (item) {\n            _this.highlighted.emit(item);\n        });\n        this.completer.opened.subscribe(function (isOpen) {\n            _this._open = isOpen;\n            _this.opened.emit(isOpen);\n        });\n    };\n    CompleterCmp.prototype.onBlur = function () {\n        this.blurEvent.emit();\n        this.onTouched();\n        this.cdr.detectChanges();\n    };\n    CompleterCmp.prototype.onFocus = function () {\n        this.focusEvent.emit();\n        this.onTouched();\n    };\n    CompleterCmp.prototype.onClick = function (event) {\n        this.click.emit(event);\n        this.onTouched();\n    };\n    CompleterCmp.prototype.onKeyup = function (event) {\n        this.keyup.emit(event);\n        event.stopPropagation();\n    };\n    CompleterCmp.prototype.onKeydown = function (event) {\n        this.keydown.emit(event);\n        event.stopPropagation();\n    };\n    CompleterCmp.prototype.onChange = function (value) {\n        this.value = value;\n    };\n    CompleterCmp.prototype.open = function () {\n        this.completer.open();\n    };\n    CompleterCmp.prototype.close = function () {\n        this.completer.clear();\n    };\n    CompleterCmp.prototype.focus = function () {\n        if (this.ctrInput) {\n            this.ctrInput.nativeElement.focus();\n        }\n        else {\n            this._focus = true;\n        }\n    };\n    CompleterCmp.prototype.blur = function () {\n        if (this.ctrInput) {\n            this.ctrInput.nativeElement.blur();\n        }\n        else {\n            this._focus = false;\n        }\n    };\n    CompleterCmp.prototype.isOpen = function () {\n        return this._open;\n    };\n    CompleterCmp.decorators = [\n        { type: Component, args: [{\n                    selector: \"ng2-completer\",\n                    template: \"\\n        <div class=\\\"completer-holder\\\" ctrCompleter>\\n            <input #ctrInput [attr.id]=\\\"inputId.length > 0 ? inputId : null\\\" type=\\\"search\\\" class=\\\"completer-input\\\" ctrInput [ngClass]=\\\"inputClass\\\"\\n                [(ngModel)]=\\\"searchStr\\\" (ngModelChange)=\\\"onChange($event)\\\" [attr.name]=\\\"inputName\\\" [placeholder]=\\\"placeholder\\\"\\n                [attr.maxlength]=\\\"maxChars\\\" [tabindex]=\\\"fieldTabindex\\\" [disabled]=\\\"disableInput\\\"\\n                [clearSelected]=\\\"clearSelected\\\" [clearUnselected]=\\\"clearUnselected\\\"\\n                [overrideSuggested]=\\\"overrideSuggested\\\" [openOnFocus]=\\\"openOnFocus\\\" [fillHighlighted]=\\\"fillHighlighted\\\" \\n                [openOnClick]=\\\"openOnClick\\\" [selectOnClick]=\\\"selectOnClick\\\" [selectOnFocus]=\\\"selectOnFocus\\\"\\n                (blur)=\\\"onBlur()\\\" (focus)=\\\"onFocus()\\\" (keyup)=\\\"onKeyup($event)\\\" (keydown)=\\\"onKeydown($event)\\\" (click)=\\\"onClick($event)\\\"\\n                autocomplete=\\\"off\\\" autocorrect=\\\"off\\\" autocapitalize=\\\"off\\\" />\\n\\n            <div class=\\\"completer-dropdown-holder\\\"\\n                *ctrList=\\\"dataService;\\n                    minSearchLength: minSearchLength;\\n                    pause: pause;\\n                    autoMatch: autoMatch;\\n                    initialValue: initialValue;\\n                    autoHighlight: autoHighlight;\\n                    displaySearching: displaySearching;\\n                    let items = results;\\n                    let searchActive = searching;\\n                    let isInitialized = searchInitialized;\\n                    let isOpen = isOpen;\\\">\\n                <div class=\\\"completer-dropdown\\\" ctrDropdown *ngIf=\\\"isInitialized && isOpen && (( items?.length > 0|| (displayNoResults && !searchActive)) || (searchActive && displaySearching))\\\">\\n                    <div *ngIf=\\\"searchActive && displaySearching\\\" class=\\\"completer-searching\\\">{{_textSearching}}</div>\\n                    <div *ngIf=\\\"!searchActive && (!items || items?.length === 0)\\\" class=\\\"completer-no-results\\\">{{_textNoResults}}</div>\\n                    <div class=\\\"completer-row-wrapper\\\" *ngFor=\\\"let item of items; let rowIndex=index\\\">\\n                        <div class=\\\"completer-row\\\" [ctrRow]=\\\"rowIndex\\\" [dataItem]=\\\"item\\\">\\n                            <div *ngIf=\\\"item.image || item.image === ''\\\" class=\\\"completer-image-holder\\\">\\n                                <img *ngIf=\\\"item.image != ''\\\" src=\\\"{{item.image}}\\\" class=\\\"completer-image\\\" />\\n                                <div *ngIf=\\\"item.image === ''\\\" class=\\\"completer-image-default\\\"></div>\\n                            </div>\\n                            <div class=\\\"completer-item-text\\\" [ngClass]=\\\"{'completer-item-text-image': item.image || item.image === '' }\\\">\\n                                <completer-list-item class=\\\"completer-title\\\" [text]=\\\"item.title\\\" [matchClass]=\\\"matchClass\\\" [searchStr]=\\\"searchStr\\\" [type]=\\\"'title'\\\"></completer-list-item>\\n                                <completer-list-item *ngIf=\\\"item.description && item.description != ''\\\" class=\\\"completer-description\\\" [text]=\\\"item.description\\\"\\n                                    [matchClass]=\\\"matchClass\\\" [searchStr]=\\\"searchStr\\\" [type]=\\\"'description'\\\">\\n                                </completer-list-item>\\n                            </div>\\n                        </div>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n    \",\n                    styles: [\"\\n    .completer-dropdown {\\n        border-color: #ececec;\\n        border-width: 1px;\\n        border-style: solid;\\n        border-radius: 2px;\\n        width: 250px;\\n        padding: 6px;\\n        cursor: pointer;\\n        z-index: 9999;\\n        position: absolute;\\n        margin-top: -6px;\\n        background-color: #ffffff;\\n    }\\n\\n    .completer-row {\\n        padding: 5px;\\n        color: #000000;\\n        margin-bottom: 4px;\\n        clear: both;\\n        display: inline-block;\\n        width: 103%;\\n    }\\n\\n    .completer-selected-row {\\n        background-color: lightblue;\\n        color: #ffffff;\\n    }\\n\\n    .completer-description {\\n        font-size: 14px;\\n    }\\n\\n    .completer-image-default {\\n        width: 16px;\\n        height: 16px;\\n        background-image: url(\\\"demo/res/img/default.png\\\");\\n    }\\n\\n    .completer-image-holder {\\n        float: left;\\n        width: 10%;\\n    }\\n    .completer-item-text-image {\\n        float: right;\\n        width: 90%;\\n    }\\n    \"],\n                    providers: [COMPLETER_CONTROL_VALUE_ACCESSOR]\n                },] },\n    ];\n    /** @nocollapse */\n    CompleterCmp.ctorParameters = function () { return [\n        { type: CompleterService, },\n        { type: ChangeDetectorRef, },\n    ]; };\n    CompleterCmp.propDecorators = {\n        'dataService': [{ type: Input },],\n        'inputName': [{ type: Input },],\n        'inputId': [{ type: Input },],\n        'pause': [{ type: Input },],\n        'minSearchLength': [{ type: Input },],\n        'maxChars': [{ type: Input },],\n        'overrideSuggested': [{ type: Input },],\n        'clearSelected': [{ type: Input },],\n        'clearUnselected': [{ type: Input },],\n        'fillHighlighted': [{ type: Input },],\n        'placeholder': [{ type: Input },],\n        'matchClass': [{ type: Input },],\n        'fieldTabindex': [{ type: Input },],\n        'autoMatch': [{ type: Input },],\n        'disableInput': [{ type: Input },],\n        'inputClass': [{ type: Input },],\n        'autofocus': [{ type: Input },],\n        'openOnFocus': [{ type: Input },],\n        'openOnClick': [{ type: Input },],\n        'selectOnClick': [{ type: Input },],\n        'selectOnFocus': [{ type: Input },],\n        'initialValue': [{ type: Input },],\n        'autoHighlight': [{ type: Input },],\n        'selected': [{ type: Output },],\n        'highlighted': [{ type: Output },],\n        'blurEvent': [{ type: Output, args: [\"blur\",] },],\n        'click': [{ type: Output },],\n        'focusEvent': [{ type: Output, args: [\"focus\",] },],\n        'opened': [{ type: Output },],\n        'keyup': [{ type: Output },],\n        'keydown': [{ type: Output },],\n        'completer': [{ type: ViewChild, args: [CtrCompleter,] },],\n        'ctrInput': [{ type: ViewChild, args: [\"ctrInput\",] },],\n        'datasource': [{ type: Input },],\n        'textNoResults': [{ type: Input },],\n        'textSearching': [{ type: Input },],\n    };\n    return CompleterCmp;\n}());\nexport { CompleterCmp };\n//# sourceMappingURL=completer-cmp.js.map","\"use strict\";\nimport { Component, Input } from \"@angular/core\";\nvar CompleterListItemCmp = (function () {\n    function CompleterListItemCmp() {\n        this.parts = [];\n    }\n    CompleterListItemCmp.prototype.ngOnInit = function () {\n        if (!this.searchStr) {\n            this.parts.push({ isMatch: false, text: this.text });\n            return;\n        }\n        var matchStr = this.text.toLowerCase();\n        var matchPos = matchStr.indexOf(this.searchStr.toLowerCase());\n        var startIndex = 0;\n        while (matchPos >= 0) {\n            var matchText = this.text.slice(matchPos, matchPos + this.searchStr.length);\n            if (matchPos === 0) {\n                this.parts.push({ isMatch: true, text: matchText });\n                startIndex += this.searchStr.length;\n            }\n            else if (matchPos > 0) {\n                var matchPart = this.text.slice(startIndex, matchPos);\n                this.parts.push({ isMatch: false, text: matchPart });\n                this.parts.push({ isMatch: true, text: matchText });\n                startIndex += this.searchStr.length + matchPart.length;\n            }\n            matchPos = matchStr.indexOf(this.searchStr.toLowerCase(), startIndex);\n        }\n        if (startIndex < this.text.length) {\n            this.parts.push({ isMatch: false, text: this.text.slice(startIndex, this.text.length) });\n        }\n    };\n    CompleterListItemCmp.decorators = [\n        { type: Component, args: [{\n                    selector: \"completer-list-item\",\n                    template: \"<span class=\\\"completer-list-item-holder\\\" [ngClass]=\\\"{'completer-title': type === 'title', 'completer-description': type === 'description'}\\\" >\\n        <span class=\\\"completer-list-item\\\" *ngFor=\\\"let part of parts\\\" [ngClass]=\\\"part.isMatch ? matchClass : null\\\">{{part.text}}</span>\\n    </span>\"\n                },] },\n    ];\n    /** @nocollapse */\n    CompleterListItemCmp.ctorParameters = function () { return []; };\n    CompleterListItemCmp.propDecorators = {\n        'text': [{ type: Input },],\n        'searchStr': [{ type: Input },],\n        'matchClass': [{ type: Input },],\n        'type': [{ type: Input },],\n    };\n    return CompleterListItemCmp;\n}());\nexport { CompleterListItemCmp };\n//# sourceMappingURL=completer-list-item-cmp.js.map","import { Directive, ElementRef, Host, HostListener } from \"@angular/core\";\nimport { CtrCompleter } from \"./ctr-completer\";\nimport { isNil } from \"../globals\";\nvar CtrRowItem = (function () {\n    function CtrRowItem(row, index) {\n        this.row = row;\n        this.index = index;\n    }\n    return CtrRowItem;\n}());\nexport { CtrRowItem };\nvar CtrDropdown = (function () {\n    function CtrDropdown(completer, el) {\n        this.completer = completer;\n        this.el = el;\n        this.rows = [];\n        this._rowMouseDown = false;\n        this.completer.registerDropdown(this);\n    }\n    CtrDropdown.prototype.ngOnDestroy = function () {\n        this.completer.registerDropdown(null);\n    };\n    CtrDropdown.prototype.ngAfterViewInit = function () {\n        var _this = this;\n        var css = getComputedStyle(this.el.nativeElement);\n        var autoHighlightIndex = this.completer.autoHighlightIndex;\n        this.isScrollOn = !!css.maxHeight && css.overflowY === \"auto\";\n        if (autoHighlightIndex) {\n            setTimeout(function () {\n                _this.highlightRow(autoHighlightIndex);\n            }, 0);\n        }\n    };\n    CtrDropdown.prototype.onMouseDown = function (event) {\n        var _this = this;\n        // Support for canceling blur on IE (issue #158)\n        if (!this._rowMouseDown) {\n            this.completer.cancelBlur(true);\n            setTimeout(function () {\n                _this.completer.cancelBlur(false);\n            }, 0);\n        }\n        else {\n            this._rowMouseDown = false;\n        }\n    };\n    CtrDropdown.prototype.registerRow = function (row) {\n        var arrIndex = this.rows.findIndex(function (_row) { return _row.index === row.index; });\n        if (arrIndex >= 0) {\n            this.rows[arrIndex] = row;\n        }\n        else {\n            this.rows.push(row);\n        }\n    };\n    CtrDropdown.prototype.unregisterRow = function (rowIndex) {\n        var arrIndex = this.rows.findIndex(function (_row) { return _row.index === rowIndex; });\n        this.rows.splice(arrIndex, 1);\n        if (this.currHighlighted && rowIndex === this.currHighlighted.index) {\n            this.highlightRow(null);\n        }\n    };\n    CtrDropdown.prototype.highlightRow = function (index) {\n        var highlighted = this.rows.find(function (row) { return row.index === index; });\n        if (isNil(index) || index < 0) {\n            if (this.currHighlighted) {\n                this.currHighlighted.row.setHighlighted(false);\n            }\n            this.currHighlighted = undefined;\n            this.completer.onHighlighted(null);\n            return;\n        }\n        if (!highlighted) {\n            return;\n        }\n        if (this.currHighlighted) {\n            this.currHighlighted.row.setHighlighted(false);\n        }\n        this.currHighlighted = highlighted;\n        this.currHighlighted.row.setHighlighted(true);\n        this.completer.onHighlighted(this.currHighlighted.row.getDataItem());\n        if (this.isScrollOn && this.currHighlighted) {\n            var rowTop = this.dropdownRowTop();\n            if (!rowTop) {\n                return;\n            }\n            if (rowTop < 0) {\n                this.dropdownScrollTopTo(rowTop - 1);\n            }\n            else {\n                var row = this.currHighlighted.row.getNativeElement();\n                if (this.dropdownHeight() < row.getBoundingClientRect().bottom) {\n                    this.dropdownScrollTopTo(this.dropdownRowOffsetHeight(row));\n                    if (this.el.nativeElement.getBoundingClientRect().bottom - this.dropdownRowOffsetHeight(row) < row.getBoundingClientRect().top) {\n                        this.dropdownScrollTopTo(row.getBoundingClientRect().top - (this.el.nativeElement.getBoundingClientRect().top + parseInt(getComputedStyle(this.el.nativeElement).paddingTop, 10)));\n                    }\n                }\n            }\n        }\n    };\n    CtrDropdown.prototype.clear = function () {\n        this.rows = [];\n    };\n    CtrDropdown.prototype.onSelected = function (item) {\n        this.completer.onSelected(item);\n    };\n    CtrDropdown.prototype.rowMouseDown = function () {\n        this._rowMouseDown = true;\n    };\n    CtrDropdown.prototype.selectCurrent = function () {\n        if (this.currHighlighted) {\n            this.onSelected(this.currHighlighted.row.getDataItem());\n        }\n        else if (this.rows.length > 0) {\n            this.onSelected(this.rows[0].row.getDataItem());\n        }\n    };\n    CtrDropdown.prototype.nextRow = function () {\n        var nextRowIndex = 0;\n        if (this.currHighlighted) {\n            nextRowIndex = this.currHighlighted.index + 1;\n        }\n        this.highlightRow(nextRowIndex);\n    };\n    CtrDropdown.prototype.prevRow = function () {\n        var nextRowIndex = -1;\n        if (this.currHighlighted) {\n            nextRowIndex = this.currHighlighted.index - 1;\n        }\n        this.highlightRow(nextRowIndex);\n    };\n    CtrDropdown.prototype.dropdownScrollTopTo = function (offset) {\n        this.el.nativeElement.scrollTop = this.el.nativeElement.scrollTop + offset;\n    };\n    CtrDropdown.prototype.dropdownRowTop = function () {\n        if (!this.currHighlighted) {\n            return;\n        }\n        return this.currHighlighted.row.getNativeElement().getBoundingClientRect().top -\n            (this.el.nativeElement.getBoundingClientRect().top +\n                parseInt(getComputedStyle(this.el.nativeElement).paddingTop, 10));\n    };\n    CtrDropdown.prototype.dropdownHeight = function () {\n        return this.el.nativeElement.getBoundingClientRect().top +\n            parseInt(getComputedStyle(this.el.nativeElement).maxHeight, 10);\n    };\n    CtrDropdown.prototype.dropdownRowOffsetHeight = function (row) {\n        var css = getComputedStyle(row.parentElement);\n        return row.parentElement.offsetHeight +\n            parseInt(css.marginTop, 10) + parseInt(css.marginBottom, 10);\n    };\n    CtrDropdown.decorators = [\n        { type: Directive, args: [{\n                    selector: \"[ctrDropdown]\",\n                },] },\n    ];\n    /** @nocollapse */\n    CtrDropdown.ctorParameters = function () { return [\n        { type: CtrCompleter, decorators: [{ type: Host },] },\n        { type: ElementRef, },\n    ]; };\n    CtrDropdown.propDecorators = {\n        'onMouseDown': [{ type: HostListener, args: [\"mousedown\", [\"$event\"],] },],\n    };\n    return CtrDropdown;\n}());\nexport { CtrDropdown };\n//# sourceMappingURL=ctr-dropdown.js.map","import { Directive, ElementRef, EventEmitter, Host, HostListener, Input, Output } from \"@angular/core\";\nimport { NgModel } from \"@angular/forms\";\nimport { Observable } from \"rxjs/Observable\";\nimport { CtrCompleter } from \"./ctr-completer\";\nimport { isNil } from \"../globals\";\n// keyboard events\nvar KEY_DW = 40;\nvar KEY_RT = 39;\nvar KEY_UP = 38;\nvar KEY_LF = 37;\nvar KEY_ES = 27;\nvar KEY_EN = 13;\nvar KEY_TAB = 9;\nvar KEY_BK = 8;\nvar KEY_SH = 16;\nvar KEY_CL = 20;\nvar KEY_F1 = 112;\nvar KEY_F12 = 123;\nvar CtrInput = (function () {\n    function CtrInput(completer, ngModel, el) {\n        var _this = this;\n        this.completer = completer;\n        this.ngModel = ngModel;\n        this.el = el;\n        this.clearSelected = false;\n        this.clearUnselected = false;\n        this.overrideSuggested = false;\n        this.fillHighlighted = true;\n        this.openOnFocus = false;\n        this.openOnClick = false;\n        this.selectOnClick = false;\n        this.selectOnFocus = false;\n        this.ngModelChange = new EventEmitter();\n        this._searchStr = \"\";\n        this._displayStr = \"\";\n        this.blurTimer = null;\n        this.completer.selected.subscribe(function (item) {\n            if (!item) {\n                return;\n            }\n            if (_this.clearSelected) {\n                _this.searchStr = \"\";\n            }\n            else {\n                _this.searchStr = item.title;\n            }\n            _this.ngModelChange.emit(_this.searchStr);\n        });\n        this.completer.highlighted.subscribe(function (item) {\n            if (_this.fillHighlighted) {\n                if (item) {\n                    _this._displayStr = item.title;\n                    _this.ngModelChange.emit(item.title);\n                }\n                else {\n                    _this._displayStr = _this.searchStr;\n                    _this.ngModelChange.emit(_this.searchStr);\n                }\n            }\n        });\n        this.completer.dataSourceChange.subscribe(function () {\n            _this.searchStr = \"\";\n            _this.ngModelChange.emit(_this.searchStr);\n        });\n        if (this.ngModel.valueChanges) {\n            this.ngModel.valueChanges.subscribe(function (value) {\n                if (!isNil(value) && _this._displayStr !== value) {\n                    if (_this.searchStr !== value) {\n                        _this.completer.search(value);\n                    }\n                    _this.searchStr = value;\n                }\n            });\n        }\n    }\n    CtrInput.prototype.keyupHandler = function (event) {\n        if (event.keyCode === KEY_LF || event.keyCode === KEY_RT || event.keyCode === KEY_TAB) {\n            // do nothing\n            return;\n        }\n        if (event.keyCode === KEY_UP || event.keyCode === KEY_EN) {\n            event.preventDefault();\n        }\n        else if (event.keyCode === KEY_DW) {\n            event.preventDefault();\n            this.completer.search(this.searchStr);\n        }\n        else if (event.keyCode === KEY_ES) {\n            if (this.completer.isOpen) {\n                this.restoreSearchValue();\n                this.completer.clear();\n                event.stopPropagation();\n                event.preventDefault();\n            }\n        }\n    };\n    CtrInput.prototype.pasteHandler = function (event) {\n        this.completer.open();\n    };\n    CtrInput.prototype.keydownHandler = function (event) {\n        var keyCode = event.keyCode || event.which;\n        if (keyCode === KEY_EN) {\n            if (this.completer.hasHighlighted()) {\n                event.preventDefault();\n            }\n            this.handleSelection();\n        }\n        else if (keyCode === KEY_DW) {\n            event.preventDefault();\n            this.completer.open();\n            this.completer.nextRow();\n        }\n        else if (keyCode === KEY_UP) {\n            event.preventDefault();\n            this.completer.prevRow();\n        }\n        else if (keyCode === KEY_TAB) {\n            this.handleSelection();\n        }\n        else if (keyCode === KEY_BK) {\n            this.completer.open();\n        }\n        else if (keyCode === KEY_ES) {\n            // This is very specific to IE10/11 #272\n            // without this, IE clears the input text\n            event.preventDefault();\n            if (this.completer.isOpen) {\n                event.stopPropagation();\n            }\n        }\n        else {\n            if (keyCode !== 0 && keyCode !== KEY_SH && keyCode !== KEY_CL &&\n                (keyCode <= KEY_F1 || keyCode >= KEY_F12) &&\n                !event.ctrlKey && !event.metaKey && !event.altKey) {\n                this.completer.open();\n            }\n        }\n    };\n    CtrInput.prototype.onBlur = function (event) {\n        var _this = this;\n        // Check if we need to cancel Blur for IE\n        if (this.completer.isCancelBlur()) {\n            setTimeout(function () {\n                // get the focus back\n                _this.el.nativeElement.focus();\n            }, 0);\n            return;\n        }\n        if (this.completer.isOpen) {\n            this.blurTimer = Observable.timer(200).subscribe(function () { return _this.doBlur(); });\n        }\n    };\n    CtrInput.prototype.onfocus = function () {\n        if (this.blurTimer) {\n            this.blurTimer.unsubscribe();\n            this.blurTimer = null;\n        }\n        if (this.selectOnFocus) {\n            this.el.nativeElement.select();\n        }\n        if (this.openOnFocus) {\n            this.completer.open();\n        }\n    };\n    CtrInput.prototype.onClick = function (event) {\n        if (this.selectOnClick) {\n            this.el.nativeElement.select();\n        }\n        if (this.openOnClick) {\n            if (this.completer.isOpen) {\n                this.completer.clear();\n            }\n            else {\n                this.completer.open();\n            }\n        }\n    };\n    Object.defineProperty(CtrInput.prototype, \"searchStr\", {\n        get: function () {\n            return this._searchStr;\n        },\n        set: function (term) {\n            this._searchStr = term;\n            this._displayStr = term;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CtrInput.prototype.handleSelection = function () {\n        if (this.completer.hasHighlighted()) {\n            this._searchStr = \"\";\n            this.completer.selectCurrent();\n        }\n        else if (this.overrideSuggested) {\n            this.completer.onSelected({ title: this.searchStr, originalObject: null });\n        }\n        else {\n            if (this.clearUnselected) {\n                this.searchStr = \"\";\n                this.ngModelChange.emit(this.searchStr);\n            }\n            this.completer.clear();\n        }\n    };\n    CtrInput.prototype.restoreSearchValue = function () {\n        if (this.fillHighlighted) {\n            if (this._displayStr != this.searchStr) {\n                this._displayStr = this.searchStr;\n                this.ngModelChange.emit(this.searchStr);\n            }\n        }\n    };\n    CtrInput.prototype.doBlur = function () {\n        if (this.blurTimer) {\n            this.blurTimer.unsubscribe();\n            this.blurTimer = null;\n        }\n        if (this.overrideSuggested) {\n            this.completer.onSelected({ title: this.searchStr, originalObject: null });\n        }\n        else {\n            if (this.clearUnselected && !this.completer.hasSelected) {\n                this.searchStr = \"\";\n                this.ngModelChange.emit(this.searchStr);\n            }\n            else {\n                this.restoreSearchValue();\n            }\n        }\n        this.completer.clear();\n    };\n    CtrInput.decorators = [\n        { type: Directive, args: [{\n                    selector: \"[ctrInput]\",\n                },] },\n    ];\n    /** @nocollapse */\n    CtrInput.ctorParameters = function () { return [\n        { type: CtrCompleter, decorators: [{ type: Host },] },\n        { type: NgModel, },\n        { type: ElementRef, },\n    ]; };\n    CtrInput.propDecorators = {\n        'clearSelected': [{ type: Input, args: [\"clearSelected\",] },],\n        'clearUnselected': [{ type: Input, args: [\"clearUnselected\",] },],\n        'overrideSuggested': [{ type: Input, args: [\"overrideSuggested\",] },],\n        'fillHighlighted': [{ type: Input, args: [\"fillHighlighted\",] },],\n        'openOnFocus': [{ type: Input, args: [\"openOnFocus\",] },],\n        'openOnClick': [{ type: Input, args: [\"openOnClick\",] },],\n        'selectOnClick': [{ type: Input, args: [\"selectOnClick\",] },],\n        'selectOnFocus': [{ type: Input, args: [\"selectOnFocus\",] },],\n        'ngModelChange': [{ type: Output },],\n        'keyupHandler': [{ type: HostListener, args: [\"keyup\", [\"$event\"],] },],\n        'pasteHandler': [{ type: HostListener, args: [\"paste\", [\"$event\"],] },],\n        'keydownHandler': [{ type: HostListener, args: [\"keydown\", [\"$event\"],] },],\n        'onBlur': [{ type: HostListener, args: [\"blur\", [\"$event\"],] },],\n        'onfocus': [{ type: HostListener, args: [\"focus\", [],] },],\n        'onClick': [{ type: HostListener, args: [\"click\", [\"$event\"],] },],\n    };\n    return CtrInput;\n}());\nexport { CtrInput };\n//# sourceMappingURL=ctr-input.js.map","import \"rxjs/add/observable/timer\";\nimport { ChangeDetectorRef, Directive, Host, Input, TemplateRef, ViewContainerRef } from \"@angular/core\";\nimport { Observable } from \"rxjs/Observable\";\nimport \"rxjs/add/operator/retryWhen\";\nimport \"rxjs/add/operator/do\";\nimport { CtrCompleter } from \"./ctr-completer\";\nimport { MIN_SEARCH_LENGTH, PAUSE, CLEAR_TIMEOUT, isNil } from \"../globals\";\nvar CtrListContext = (function () {\n    function CtrListContext(results, searching, searchInitialized, isOpen) {\n        this.results = results;\n        this.searching = searching;\n        this.searchInitialized = searchInitialized;\n        this.isOpen = isOpen;\n    }\n    return CtrListContext;\n}());\nexport { CtrListContext };\nvar CtrList = (function () {\n    function CtrList(completer, templateRef, viewContainer, cd) {\n        this.completer = completer;\n        this.templateRef = templateRef;\n        this.viewContainer = viewContainer;\n        this.cd = cd;\n        this.ctrListMinSearchLength = MIN_SEARCH_LENGTH;\n        this.ctrListPause = PAUSE;\n        this.ctrListAutoMatch = false;\n        this.ctrListAutoHighlight = false;\n        this.ctrListDisplaySearching = true;\n        // private results: CompleterItem[] = [];\n        this.term = null;\n        // private searching = false;\n        this.searchTimer = null;\n        this.clearTimer = null;\n        this.ctx = new CtrListContext([], false, false, false);\n        this._initialValue = null;\n        this.viewRef = null;\n    }\n    CtrList.prototype.ngOnInit = function () {\n        this.completer.registerList(this);\n        this.viewRef = this.viewContainer.createEmbeddedView(this.templateRef, new CtrListContext([], false, false, false));\n    };\n    Object.defineProperty(CtrList.prototype, \"dataService\", {\n        set: function (newService) {\n            this._dataService = newService;\n            this.dataServiceSubscribe();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CtrList.prototype, \"initialValue\", {\n        set: function (value) {\n            var _this = this;\n            if (this._dataService && typeof this._dataService.convertToItem === \"function\") {\n                setTimeout(function () {\n                    var initialItem = _this._dataService.convertToItem(value);\n                    if (initialItem) {\n                        _this.completer.onSelected(initialItem, false);\n                    }\n                });\n            }\n            else if (!this._dataService) {\n                this._initialValue = value;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CtrList.prototype.search = function (term) {\n        var _this = this;\n        if (!isNil(term) && term.length >= this.ctrListMinSearchLength && this.term !== term) {\n            if (this.searchTimer) {\n                this.searchTimer.unsubscribe();\n                this.searchTimer = null;\n            }\n            if (!this.ctx.searching) {\n                if (this.ctrListDisplaySearching) {\n                    this.ctx.results = [];\n                }\n                this.ctx.searching = true;\n                this.ctx.searchInitialized = true;\n                this.refreshTemplate();\n            }\n            if (this.clearTimer) {\n                this.clearTimer.unsubscribe();\n            }\n            this.searchTimer = Observable.timer(this.ctrListPause).subscribe(function () {\n                _this.searchTimerComplete(term);\n            });\n        }\n        else if (!isNil(term) && term.length < this.ctrListMinSearchLength) {\n            this.clear();\n            this.term = \"\";\n        }\n    };\n    CtrList.prototype.clear = function () {\n        var _this = this;\n        if (this.searchTimer) {\n            this.searchTimer.unsubscribe();\n        }\n        this.clearTimer = Observable.timer(CLEAR_TIMEOUT).subscribe(function () {\n            _this._clear();\n        });\n    };\n    CtrList.prototype.open = function () {\n        if (!this.ctx.searchInitialized) {\n            this.search(\"\");\n        }\n        this.refreshTemplate();\n    };\n    CtrList.prototype.isOpen = function (open) {\n        this.ctx.isOpen = open;\n    };\n    CtrList.prototype._clear = function () {\n        if (this.searchTimer) {\n            this.searchTimer.unsubscribe();\n            this.searchTimer = null;\n        }\n        if (this.dataService) {\n            this.dataService.cancel();\n        }\n        this.viewContainer.clear();\n        this.viewRef = null;\n    };\n    CtrList.prototype.searchTimerComplete = function (term) {\n        // Begin the search\n        if (isNil(term) || term.length < this.ctrListMinSearchLength) {\n            this.ctx.searching = false;\n            return;\n        }\n        this.term = term;\n        this._dataService.search(term);\n    };\n    CtrList.prototype.refreshTemplate = function () {\n        // create the template if it doesn't exist\n        if (!this.viewRef) {\n            this.viewRef = this.viewContainer.createEmbeddedView(this.templateRef, this.ctx);\n        }\n        else if (!this.viewRef.destroyed) {\n            // refresh the template\n            this.viewRef.context.isOpen = this.ctx.isOpen;\n            this.viewRef.context.results = this.ctx.results;\n            this.viewRef.context.searching = this.ctx.searching;\n            this.viewRef.context.searchInitialized = this.ctx.searchInitialized;\n            this.viewRef.detectChanges();\n        }\n        this.cd.markForCheck();\n    };\n    CtrList.prototype.getBestMatchIndex = function () {\n        var _this = this;\n        if (!this.ctx.results || !this.term) {\n            return null;\n        }\n        // First try to find the exact term\n        var bestMatch = this.ctx.results.findIndex(function (item) { return item.title.toLowerCase() === _this.term.toLocaleLowerCase(); });\n        // If not try to find the first item that starts with the term\n        if (bestMatch < 0) {\n            bestMatch = this.ctx.results.findIndex(function (item) { return item.title.toLowerCase().startsWith(_this.term.toLocaleLowerCase()); });\n        }\n        // If not try to find the first item that includes the term\n        if (bestMatch < 0) {\n            bestMatch = this.ctx.results.findIndex(function (item) { return item.title.toLowerCase().includes(_this.term.toLocaleLowerCase()); });\n        }\n        return bestMatch < 0 ? null : bestMatch;\n    };\n    CtrList.prototype.dataServiceSubscribe = function () {\n        var _this = this;\n        if (this._dataService) {\n            this._dataService\n                .catch(function (err) {\n                console.error(err);\n                console.error(\"Unexpected error in dataService: errors should be handled by the dataService Observable\");\n                return [];\n            })\n                .subscribe(function (results) {\n                _this.ctx.searchInitialized = true;\n                _this.ctx.searching = false;\n                _this.ctx.results = results;\n                if (_this.ctrListAutoMatch && results && results.length === 1 && results[0].title && !isNil(_this.term) &&\n                    results[0].title.toLocaleLowerCase() === _this.term.toLocaleLowerCase()) {\n                    // Do automatch\n                    _this.completer.onSelected(results[0]);\n                    return;\n                }\n                if (_this._initialValue) {\n                    _this.initialValue = _this._initialValue;\n                    _this._initialValue = null;\n                }\n                _this.refreshTemplate();\n                if (_this.ctrListAutoHighlight) {\n                    _this.completer.autoHighlightIndex = _this.getBestMatchIndex();\n                }\n            });\n            if (this._dataService.dataSourceChange) {\n                this._dataService.dataSourceChange.subscribe(function () {\n                    _this.term = null;\n                    _this.ctx.searchInitialized = false;\n                    _this.ctx.searching = false;\n                    _this.ctx.results = [];\n                    _this.refreshTemplate();\n                    _this.completer.onDataSourceChange();\n                });\n            }\n        }\n    };\n    CtrList.decorators = [\n        { type: Directive, args: [{\n                    selector: \"[ctrList]\",\n                },] },\n    ];\n    /** @nocollapse */\n    CtrList.ctorParameters = function () { return [\n        { type: CtrCompleter, decorators: [{ type: Host },] },\n        { type: TemplateRef, },\n        { type: ViewContainerRef, },\n        { type: ChangeDetectorRef, },\n    ]; };\n    CtrList.propDecorators = {\n        'ctrListMinSearchLength': [{ type: Input },],\n        'ctrListPause': [{ type: Input },],\n        'ctrListAutoMatch': [{ type: Input },],\n        'ctrListAutoHighlight': [{ type: Input },],\n        'ctrListDisplaySearching': [{ type: Input },],\n        'dataService': [{ type: Input, args: [\"ctrList\",] },],\n        'initialValue': [{ type: Input, args: [\"ctrListInitialValue\",] },],\n    };\n    return CtrList;\n}());\nexport { CtrList };\n//# sourceMappingURL=ctr-list.js.map","import { Directive, ElementRef, Host, HostListener, Input, Renderer } from \"@angular/core\";\nimport { CtrDropdown, CtrRowItem } from \"./ctr-dropdown\";\nvar CtrRow = (function () {\n    function CtrRow(el, renderer, dropdown) {\n        this.el = el;\n        this.renderer = renderer;\n        this.dropdown = dropdown;\n        this.selected = false;\n    }\n    CtrRow.prototype.ngOnDestroy = function () {\n        if (this._rowIndex) {\n            this.dropdown.unregisterRow(this._rowIndex);\n        }\n    };\n    Object.defineProperty(CtrRow.prototype, \"ctrRow\", {\n        set: function (index) {\n            this._rowIndex = index;\n            this.dropdown.registerRow(new CtrRowItem(this, this._rowIndex));\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CtrRow.prototype, \"dataItem\", {\n        set: function (item) {\n            this._item = item;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CtrRow.prototype.onClick = function (event) {\n        this.dropdown.onSelected(this._item);\n    };\n    CtrRow.prototype.onMouseEnter = function (event) {\n        this.dropdown.highlightRow(this._rowIndex);\n    };\n    CtrRow.prototype.onMouseDown = function (event) {\n        this.dropdown.rowMouseDown();\n    };\n    CtrRow.prototype.setHighlighted = function (selected) {\n        this.selected = selected;\n        this.renderer.setElementClass(this.el.nativeElement, \"completer-selected-row\", this.selected);\n    };\n    CtrRow.prototype.getNativeElement = function () {\n        return this.el.nativeElement;\n    };\n    CtrRow.prototype.getDataItem = function () {\n        return this._item;\n    };\n    CtrRow.decorators = [\n        { type: Directive, args: [{\n                    selector: \"[ctrRow]\",\n                },] },\n    ];\n    /** @nocollapse */\n    CtrRow.ctorParameters = function () { return [\n        { type: ElementRef, },\n        { type: Renderer, },\n        { type: CtrDropdown, decorators: [{ type: Host },] },\n    ]; };\n    CtrRow.propDecorators = {\n        'ctrRow': [{ type: Input },],\n        'dataItem': [{ type: Input },],\n        'onClick': [{ type: HostListener, args: [\"click\", [\"$event\"],] },],\n        'onMouseEnter': [{ type: HostListener, args: [\"mouseenter\", [\"$event\"],] },],\n        'onMouseDown': [{ type: HostListener, args: [\"mousedown\", [\"$event\"],] },],\n    };\n    return CtrRow;\n}());\nexport { CtrRow };\n//# sourceMappingURL=ctr-row.js.map","import { NgModule } from \"@angular/core\";\nimport { FormsModule } from \"@angular/forms\";\nimport { HttpModule } from \"@angular/http\";\nimport { CompleterCmp } from \"./components/completer-cmp\";\nimport { CompleterListItemCmp } from \"./components/completer-list-item-cmp\";\nimport { CompleterService } from \"./services/completer-service\";\nimport { LocalDataFactoryProvider, RemoteDataFactoryProvider } from \"./services/completer-data-factory\";\nimport { CtrCompleter } from \"./directives/ctr-completer\";\nimport { CtrDropdown } from \"./directives/ctr-dropdown\";\nimport { CtrInput } from \"./directives/ctr-input\";\nimport { CtrList } from \"./directives/ctr-list\";\nimport { CtrRow } from \"./directives/ctr-row\";\nimport { CommonModule } from \"@angular/common\";\nvar Ng2CompleterModule = (function () {\n    function Ng2CompleterModule() {\n    }\n    Ng2CompleterModule.decorators = [\n        { type: NgModule, args: [{\n                    imports: [\n                        CommonModule,\n                        FormsModule,\n                        HttpModule\n                    ],\n                    declarations: [\n                        CompleterListItemCmp,\n                        CtrCompleter,\n                        CtrDropdown,\n                        CtrInput,\n                        CtrList,\n                        CtrRow,\n                        CompleterCmp\n                    ],\n                    exports: [\n                        CompleterCmp,\n                        CompleterListItemCmp,\n                        CtrCompleter,\n                        CtrDropdown,\n                        CtrInput,\n                        CtrList,\n                        CtrRow\n                    ],\n                    providers: [\n                        CompleterService,\n                        LocalDataFactoryProvider,\n                        RemoteDataFactoryProvider\n                    ]\n                },] },\n    ];\n    /** @nocollapse */\n    Ng2CompleterModule.ctorParameters = function () { return []; };\n    return Ng2CompleterModule;\n}());\nexport { Ng2CompleterModule };\n//# sourceMappingURL=ng2-completer.module.js.map"],"names":["isNil","value","localDataFactory","LocalData","remoteDataFactory","http","RemoteData","CtrCompleter","this","selected","EventEmitter","highlighted","opened","dataSourceChange","_hasHighlighted","_hasSelected","_cancelBlur","_isOpen","prototype","registerList","list","registerDropdown","dropdown","onHighlighted","item","emit","onSelected","clearList","clear","onDataSourceChange","hasSelected","search","term","isOpen","selectCurrent","nextRow","prevRow","hasHighlighted","cancelBlur","cancel","isCancelBlur","open","Object","defineProperty","get","set","enumerable","configurable","_autoHighlightIndex","index","highlightRow","decorators","type","Directive","args","selector","ctorParameters","propDecorators","Output","MAX_CHARS","MIN_SEARCH_LENGTH","PAUSE","TEXT_SEARCHING","TEXT_NO_RESULTS","__extends","extendStatics","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","create","CompleterBaseData","_super","call","searchFields","_searchFields","titleField","_titleField","descriptionField","_descriptionField","imageField","_imageField","convertToItem","data","formattedText","image","formattedDesc","extractTitle","JSON","stringify","extractValue","title","description","originalObject","extractMatches","_this","split","undefined","filter","map","searchField","some","toString","toLowerCase","indexOf","field","reduce","acc","titlePart","obj","key","keys","result","i","length","processResults","matches","results","push","Subject","Observable","catch","subscribe","res","_data","savedTerm","next","Injectable","_urlFormater","_dataField","remoteUrl","_remoteUrl","urlFormater","dataField","headers","_headers","requestOptions","_requestOptions","url","encodeURIComponent","RequestOptions","Headers","remoteSearch","merge","json","unsubscribe","CompleterService","local","remote","Inject","noop","COMPLETER_CONTROL_VALUE_ACCESSOR","provide","NG_VALUE_ACCESSOR","useExisting","forwardRef","CompleterCmp","multi","completerService","cdr","inputName","inputId","pause","minSearchLength","maxChars","overrideSuggested","clearSelected","clearUnselected","fillHighlighted","placeholder","autoMatch","disableInput","autofocus","openOnFocus","openOnClick","selectOnClick","selectOnFocus","autoHighlight","blurEvent","click","focusEvent","keyup","keydown","control","FormControl","displaySearching","displayNoResults","_textNoResults","_textSearching","_onTouchedCallback","_onChangeCallback","_focus","_open","_searchStr","searchStr","v","ngAfterViewInit","ngAfterViewChecked","setTimeout","ctrInput","nativeElement","focus","onTouched","writeValue","registerOnChange","fn","registerOnTouched","setDisabledState","isDisabled","source","dataService","text","ngOnInit","completer","onBlur","detectChanges","onFocus","onClick","event","onKeyup","stopPropagation","onKeydown","onChange","close","blur","Component","template","styles","providers","ChangeDetectorRef","Input","matchClass","fieldTabindex","inputClass","initialValue","ViewChild","datasource","textNoResults","textSearching","CompleterListItemCmp","parts","isMatch","matchStr","matchPos","startIndex","matchText","slice","matchPart","LocalDataFactoryProvider","useFactory","RemoteDataFactoryProvider","deps","Http","CtrRowItem","row","CtrDropdown","el","rows","_rowMouseDown","ngOnDestroy","css","getComputedStyle","autoHighlightIndex","isScrollOn","maxHeight","overflowY","onMouseDown","registerRow","arrIndex","findIndex","_row","unregisterRow","rowIndex","splice","currHighlighted","find","setHighlighted","getDataItem","rowTop","dropdownRowTop","dropdownScrollTopTo","getNativeElement","dropdownHeight","getBoundingClientRect","bottom","dropdownRowOffsetHeight","top","parseInt","paddingTop","rowMouseDown","nextRowIndex","offset","scrollTop","parentElement","offsetHeight","marginTop","marginBottom","Host","ElementRef","HostListener","CtrInput","ngModel","ngModelChange","_displayStr","blurTimer","valueChanges","keyupHandler","keyCode","preventDefault","restoreSearchValue","pasteHandler","keydownHandler","which","handleSelection","ctrlKey","metaKey","altKey","timer","doBlur","onfocus","select","NgModel","CtrListContext","searching","searchInitialized","CtrList","templateRef","viewContainer","cd","ctrListMinSearchLength","ctrListPause","ctrListAutoMatch","ctrListAutoHighlight","ctrListDisplaySearching","searchTimer","clearTimer","ctx","_initialValue","viewRef","createEmbeddedView","newService","_dataService","dataServiceSubscribe","initialItem","refreshTemplate","searchTimerComplete","_clear","destroyed","context","markForCheck","getBestMatchIndex","bestMatch","toLocaleLowerCase","startsWith","includes","err","console","error","TemplateRef","ViewContainerRef","CtrRow","renderer","_rowIndex","_item","onMouseEnter","setElementClass","Renderer","ctrRow","dataItem","Ng2CompleterModule","NgModule","imports","CommonModule","FormsModule","HttpModule","declarations","exports"],"mappings":"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"}